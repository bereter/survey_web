# Проект Опросник


## Настройка для запуска проекта локально

Перед началом работы необходимо установить библиотеки и зависимости в виртуальное окружение
`pip install -r requirements.txt`

Далее в корне проекта необходимо создать файл `.env` и в нем прописать следующие параметры для базы данных и приложения:

```
DB_POSTGRES=postgresql+asyncpg://"имя пользователя":"пароль"@"хост":"порт"/"имя базы данных"
DB_POSTGRES_ALEMBIC=postgresql://"имя пользователя":"пароль"@"хост":"порт"/"имя базы данных"
JWT_SECRET_KEY="Секретный ключ"
```

И наконец применить миграции. Для этого, находясь в папке `survey_web_api` , необходимо прописать в терминале команду `alembic upgrade head`


Приложение запускается через `main.py`

---

## Запуск в Docker Compose

### Настройка

Необходимо установить docker и docker compose

Далее в корне проекта необходимо создать файл `.env` и в нем прописать следующие параметры для базы данных и приложения:

```
DB_POSTGRES=postgresql+asyncpg://postgres:postgres@db:5432/postgres
DB_POSTGRES_ALEMBIC=postgresql://postgres:postgres@db:5432/postgres
JWT_SECRET_KEY="Секретный ключ"
```

### Запуск

Для запуска команд необходимо находится в той же директории где находится файл `docker-compose.yml`

Команда для сборки docker образов `docker compose build`

Команда для запуска контейнеров `docker compose up`, запуск в фоне `docker compose up -d`

Команда для остановки контейнеров `docker compose stop`, если приложение запущено не в фоне то ctrl+c

Контейнеры работают через nginx, для запуска документации Swagger и тестирования необходимо перейти по ссылке http://0.0.0.0/docs#/ или http://0.0.0.0:80/docs#/


